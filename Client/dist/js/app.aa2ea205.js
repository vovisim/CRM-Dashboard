(function(){var t={9970:function(){},8196:function(t,e,n){"use strict";var r=n(5130),s=n(6768);const a={class:""};function o(t,e,n,r,o,u){const i=(0,s.g2)("UserAuthentication"),l=(0,s.g2)("UserTable");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(i,{onMessageSent:u.handleMessageSent},null,8,["onMessageSent"]),(0,s.bF)(l,{message:o.message},null,8,["message"])])}var u=n(4232);const i=t=>((0,s.Qi)("data-v-bd4c90ca"),t=t(),(0,s.jt)(),t),l=i((()=>(0,s.Lk)("h3",null,"Войти",-1))),c=i((()=>(0,s.Lk)("button",{type:"submit"},"Вход",-1))),d={key:0,class:"error-message"};function h(t,e,n,a,o,i){return(0,s.uX)(),(0,s.CE)("form",{onSubmit:e[2]||(e[2]=(0,r.D$)(((...t)=>i.submitForm&&i.submitForm(...t)),["prevent"])),class:"login-form"},[l,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.Login.login=t),placeholder:"Логин",required:""},null,512),[[r.Jo,o.Login.login]]),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>o.Login.password=t),placeholder:"Пароль",required:""},null,512),[[r.Jo,o.Login.password]]),c,o.errorMessage?((0,s.uX)(),(0,s.CE)("p",d,(0,u.v_)(o.errorMessage),1)):(0,s.Q3)("",!0)],32)}var g=n(4373);const f="http://127.0.0.1:2266/api/";async function m(t,e,n=null){try{let r=`${f}${t}/${e}`;n&&(r+=`/${n}`);const s=await g.A.get(r);return s.data}catch(r){throw console.error("Ошибка при получении данных:",r),r}}async function p(t,e,n="False"){try{const r=await g.A.put(`${f}clients/${t}/${n}`,e);return r.data}catch(r){throw r}}var v=n(782),b={name:"UserAuthentication",data(){return{Login:{login:"",password:""},errorMessage:"",Fullname:""}},setup(){const t=(0,v.Pj)();return{store:t}},methods:{async submitForm(){try{const t=await m("users",0),e=Object.values(t),n=e.find((t=>t.Login===this.Login.login));n?n.Password===this.Login.password?(this.errorMessage="Успешный вход!",this.$emit("rerender-table"),this.$emit("message-sent",n.Fullname),await this.store.dispatch("login",n)):this.errorMessage="Неправильный пароль!":this.errorMessage="Пользователь не найден!"}catch(t){console.error("Error during authentication:",t),this.errorMessage="Ошибка при выполнении входа!"}}}},y=n(1241);const k=(0,y.A)(b,[["render",h],["__scopeId","data-v-bd4c90ca"]]);var L=k;const w=t=>((0,s.Qi)("data-v-420b9620"),t=t(),(0,s.jt)(),t),A={class:"table-container"},S={key:0,class:"user-table"},_=w((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Индекс"),(0,s.Lk)("th",null,"AccountNumber"),(0,s.Lk)("th",null,"Surname"),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Patronymic"),(0,s.Lk)("th",null,"Birthday"),(0,s.Lk)("th",null,"TIN"),(0,s.Lk)("th",null,"FullNameResponsible"),(0,s.Lk)("th",null,"Status")])],-1))),C={class:"status"},O=["onUpdate:modelValue","onChange"],$=w((()=>(0,s.Lk)("option",{value:"В работе"},"В работе",-1))),j=w((()=>(0,s.Lk)("option",{value:"Отказ"},"Отказ",-1))),M=w((()=>(0,s.Lk)("option",{value:"Сделка закрыта"},"Сделка закрыта",-1))),E=[$,j,M];function F(t,e,n,a,o,i){return(0,s.uX)(),(0,s.CE)("div",A,[o.userDataArray.length>1?((0,s.uX)(),(0,s.CE)("table",S,[_,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.userDataArray,((t,e)=>((0,s.uX)(),(0,s.CE)("tr",{key:e},[(0,s.Lk)("td",null,(0,u.v_)(e),1),(0,s.Lk)("td",null,(0,u.v_)(t.AccountNumber),1),(0,s.Lk)("td",null,(0,u.v_)(t.Surname),1),(0,s.Lk)("td",null,(0,u.v_)(t.Name),1),(0,s.Lk)("td",null,(0,u.v_)(t.Patronymic),1),(0,s.Lk)("td",null,(0,u.v_)(t.Birthday),1),(0,s.Lk)("td",null,(0,u.v_)(t.TIN),1),(0,s.Lk)("td",null,(0,u.v_)(t.FullNameResponsible),1),(0,s.Lk)("td",C,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>t.Status=e,onChange:e=>i.updateStatus(t)},E,40,O),[[r.u1,t.Status]])])])))),128))])])):(0,s.Q3)("",!0)])}var T={name:"UserTable",data(){return{userDataArray:[]}},unmounted(){this.$root.$off("rerender-table",this.fetchClients)},props:{message:String},watch:{message(t){console.log("watch"),t&&(console.log("newmessage"),this.fetchClients(this.message))}},mounted(){this.$root.$on("rerender-table",this.fetchClients),this.message&&this.fetchClients(this.message)},methods:{async fetchClients(t){try{const e=await m("clients",0,t);e&&(this.userDataArray=Object.values(e))}catch(e){console.error("Error fetching clients:",e)}},async updateStatus(t){try{await p(t.id,{Status:t.Status},"True")}catch(e){console.error("Error updating status:",e)}}}};const U=(0,y.A)(T,[["render",F],["__scopeId","data-v-420b9620"]]);var N=U,P={name:"App",components:{UserAuthentication:L,UserTable:N},data(){return{userDataObject:{},message:""}},methods:{handleMessageSent(t){this.message=t,console.log("app")}}};const X=(0,y.A)(P,[["render",o]]);var x=X,D=n(9970),I=n.n(D);const Q=(0,v.y$)({state:{isAuthenticated:!1,user:null},mutations:{setAuthenticated(t,e){t.isAuthenticated=e.isAuthenticated,t.user=e.user}},actions:{login({commit:t},e){t("setAuthenticated",{isAuthenticated:!0,user:e})},logout({commit:t}){t("setAuthenticated",{isAuthenticated:!1,user:null})}},getters:{isAuthenticated:t=>t.isAuthenticated,user:t=>t.user}});var V=Q;const q=(0,r.Ef)(x);q.use(I()),q.use(V),q.mount("#app")}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,r,s,a){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],s=t[c][1],a=t[c][2];for(var u=!0,i=0;i<r.length;i++)(!1&a||o>=a)&&Object.keys(n.O).every((function(t){return n.O[t](r[i])}))?r.splice(i--,1):(u=!1,a<o&&(o=a));if(u){t.splice(c--,1);var l=s();void 0!==l&&(e=l)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[r,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,a,o=r[0],u=r[1],i=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(s in u)n.o(u,s)&&(n.m[s]=u[s]);if(i)var c=i(n)}for(e&&e(r);l<o.length;l++)a=o[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(8196)}));r=n.O(r)})();
//# sourceMappingURL=app.aa2ea205.js.map